<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Base64 Transfer</title><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><style type="text/css">.w75.center.h400 {margin-top: 50px;width: 75%;}.h400 {height: 450px}.center {text-align: center;margin: 0 auto}label {width: 150px;line-height: 30px;cursor: pointer;display: inline-block;}#fileChoose {visibility: hidden;width: 0;height: 0;}textarea {display: block;width: 100%;height: calc(100% - 30px);outline-offset: -2px;}</style></head><body><div class="w75 center h400"><input type="file" name="file" id="fileChoose"><label for="fileChoose">请选择文件</label><textarea id="textarea" disabled="disabled"></textarea></div></body><script type="text/javascript">var textarea = document.getElementById("textarea");document.getElementById("fileChoose").addEventListener("change",function (e) {console.log(e);var inputFile = this.files[0];var input = this;if(inputFile.size > 2*1024*1024){alert("请不要选择超过2MB的文件");return;}var reader = new FileReader();reader.readAsDataURL(inputFile);reader.onabort = function(e) {console.log("文件读取异常" + inputFile.name);input.value = "";};reader.onerror = function(e) {console.log("文件读取出现错误" + inputFile.name);input.value = "";};reader.onload = function(e) {if(e.target.result) {console.log("完成" + inputFile.name);textarea.innerText = e.target.result;}input.value = "";};})</script></html>